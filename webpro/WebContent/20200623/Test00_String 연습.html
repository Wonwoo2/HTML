<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>String 연습</title>
<link rel="stylesheet" href="../CSS/myCSS.css">
<style>
</style>
<script type="text/javascript">
	function proc1() {
		// 입력 110324-34123456
		reg = prompt("주민등록번호를 입력");
		// 입력한 값에서 문자 추출하기 yy = 11,  mm = 03, dd = 24, gg = 3
		yy = reg.substring(0, 2);
		mm = reg.substring(2, 4);
		dd = reg.substring(4, 6);
		
		gg = reg.charAt(7);
		gender = "";
		age = 0;
		// 추출한 값을 비교 ==> gg 의 값 (1, 2 - 1900년도, 3, 4 - 2000년도) , (1, 3 - 남자 /2, 4 - 여자)
		// 비교후 정보 얻기(생일, 성별)
		if(gg == 1 || gg == 3) {
			gender = "남자";
			if(gg == 1) {
				yy = "19" + yy;	
			}
			else {
				yy = "20" + yy;
			}
		} else {
			gender = "여자";
			if(gg == 2) {
				yy = "19" + yy;
			}
			else {
				yy = "20" + yy;
			}
		}
		// 나이 계산
		date = new Date();
		cYear = date.getFullYear();
		age = cYear - yy + 1;
		
		// 출력
		birthday = yy + mm + dd;
		res = `주민등록번호 : ${reg}<br>`;
		res += `나이 : ${age} <br>`;
		res += `성별 : ${gender} <br>`;
		res += `생일 : ${birthday} <br>`;
		
		document.querySelector("#result1").innerHTML = res;
	}
	function proc2() {
		reg = prompt("주민등록번호를 입력(-없이 입력)");
		num = "234567892345";
		sum = 0;
		
		for (i = 0; i < reg.length - 1; i ++) {
			sum += (reg.charAt(i) * num.charAt(i));
		}
		
		result = 11 - (sum % 11);
		
		if(result == 10) {
			result = 0;
		} else if(result == 11) {
			result = 1;
		}
		
		
		res = `입력 : ${reg.substr(0,6)}-${reg.substr(6,1)}******<br>`;
		if(reg.charAt(reg.length - 1) ==  result) {
			res += "올바른 주민등록번호 입니다.";
		} else {
			res += "올바르지 않은 주민등록번호 입니다."
		}
		
		document.querySelector("#result2").innerHTML = res;
		
		
	}
</script>
</head>
<body>

	<div class="box">
		<h2>1.문제 String</h2>
		- 주민등록번호를 입력 받아 생년월일과 성별을 출력하는 프로그램을 작성하시오.<br>
		- 입력은 prompt로 입력받는다.<br>
		<input type="button" value="확인" onclick="proc1()">
		<div id="result1"></div>
	</div>
	
	<div class="box">
		<h2>2.문제 String</h2>
		- 주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는 프로그램을 작성하시오.(ABCDEF-GHIJKLM)<br>
		- A*2 + B*3 + ... + H*9 + I*2 + ... + L*5 의 총합을 구한다.<br>
		- 가중치 : "234567892345"<br>
		- 1번의 합을 11로 나눈 나머지를 구한다.<br>
		- 11에서 2번의 결과를 뺀다.<br>
		- 3번의 결과가 0~9이면 값 그대로, 10이면 0, 11이면 1로 변환<br>
		- 4번의 결과와 M자리의 값이 같으면 맞는 번호이다.<br>
		<input type="button" value="확인" onclick="proc2()">
		<div id="result2"></div>
	</div>
</body>
</html>